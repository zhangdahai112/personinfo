(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{419:(e,r,a)=>{"use strict";var t=a(1675);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},795:(e,r,a)=>{Promise.resolve().then(a.bind(a,4521))},1053:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(5).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1332:(e,r,a)=>{"use strict";a.d(r,{PaymentProvider:()=>n,u:()=>d});var t=a(2372),l=a(8978);let i=(0,l.createContext)(void 0);function n(e){let{children:r}=e,[a,n]=(0,l.useState)(null),[d,s]=(0,l.useState)([]),c=(e,r,t)=>{s(l=>l.map(l=>{if(l.id===e){let e={...l,status:r,paymentMethod:t,paidAt:"已支付"===r?new Date().toISOString():l.paidAt};return l.id===(null==a?void 0:a.id)&&n(e),e}return l}))},o=e=>d.find(r=>r.id===e),h=async(e,r)=>{try{c(e,"支付中",r);let a=o(e);if(!a)return!1;let t="alipay"===r?"alipay://pay?orderNo=".concat(e,"&amount=").concat(a.totalAmount):"weixin://wxpay/bizpayurl?pr=wx".concat(Date.now());if(console.log("支付链接生成: ".concat(t)),await new Promise(e=>setTimeout(e,3e3)),Math.random()>.15)return c(e,"已支付",r),!0;return c(e,"支付失败",r),!1}catch(a){return console.error("Payment processing error:",a),c(e,"支付失败",r),!1}},m=async e=>{let r=o(e);return r?(await new Promise(e=>setTimeout(e,500)),"支付中"===r.status&&Math.random()>.3)?(c(e,"已支付"),"已支付"):r.status:"已取消"};return(0,t.Y)(i.Provider,{value:{currentOrder:a,orderHistory:d,createOrder:e=>{let r={基础查询:5e3,全面查询:12e3,复杂查询:2e4,咨询服务:200}[e.serviceType||"基础查询"],a=r*({普通:0,加急:.3,特急:.5})[e.urgencyLevel||"普通"],t={id:"ORDER_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),userId:e.userId||"",serviceType:e.serviceType||"基础查询",amount:r,urgencyLevel:e.urgencyLevel||"普通",urgencyFee:a,totalAmount:r+a,status:"待支付",createdAt:new Date().toISOString(),description:e.description||"",queryDetails:e.queryDetails};return n(t),s(e=>[t,...e]),t},updateOrderStatus:c,getOrderById:o,processPayment:h,generatePaymentQR:(e,r)=>{let a=o(e);if(!a)return"";let t="alipay"===r?"alipay://pay?orderNo=".concat(e,"&amount=").concat(a.totalAmount):"weixin://wxpay/bizpayurl?pr=wx".concat(Date.now());return"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(t))},calculateServicePrice:(e,r)=>{let a={基础查询:5e3,全面查询:12e3,复杂查询:2e4,咨询服务:200}[e],t=a*({普通:0,加急:.3,特急:.5})[r];return{baseAmount:a,urgencyFee:t,totalAmount:a+t}},queryPaymentStatus:m},children:r})}function d(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("usePayment must be used within a PaymentProvider");return e}},1582:(e,r,a)=>{"use strict";a.d(r,{BT:()=>c,Wu:()=>o,ZB:()=>s,Zp:()=>n,aR:()=>d});var t=a(2372),l=a(8978),i=a(29);let n=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300 hover:shadow-lg hover:shadow-red-100/50",a),...l})});n.displayName="Card";let d=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...l})});d.displayName="CardHeader";let s=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900",a),...l})});s.displayName="CardTitle";let c=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",a),...l})});o.displayName="CardContent",l.forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},2254:(e,r,a)=>{"use strict";a.d(r,{J:()=>l});var t=a(2372);let l=a(8978).forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("label",{ref:r,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ".concat(a||""),...l})});l.displayName="Label"},2630:(e,r,a)=>{"use strict";a.d(r,{T:()=>l});var t=a(2372);let l=a(8978).forwardRef((e,r)=>{let{className:a,...l}=e;return(0,t.Y)("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a||""),ref:r,...l})});l.displayName="Textarea"},3585:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(5).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},4521:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>F});var t=a(2372),l=a(8978),i=a(419),n=a(5041),d=a(8734),s=a(9084),c=a(6112),o=a(2630),h=a(2254),m=a(1582),u=a(1815),p=a(1332),g=a(3770),v=a(9287),y=a(7959);let f=(0,a(5).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var b=a(8644),N=a(1053),x=a(3585),Y=a(5102),D=a.n(Y);function F(){let{user:e}=(0,u.J)(),{createOrder:r}=(0,p.u)(),a=(0,i.useRouter)(),[Y,F]=(0,l.useState)(1),[w,k]=(0,l.useState)({targetName:"",targetIdCard:"",targetBirthDate:"",targetDeathDate:"",targetLastAddress:"",queryTypes:[],specificBanks:"",timeRange:"",relationship:"",relationshipProof:"",additionalInfo:"",urgencyLevel:"普通",uploadedFiles:[]}),C=[{number:1,title:"被查询人信息",description:"填写需要查询的人员基本信息"},{number:2,title:"查询范围",description:"选择要查询的财产类型和范围"},{number:3,title:"申请人信息",description:"填写申请人与被查询人的关系"},{number:4,title:"补充说明",description:"提供额外信息和上传相关文件"},{number:5,title:"确认提交",description:"核对信息并提交查询申请"}],A=[{id:"bank",label:"银行存款",description:"各大银行的储蓄账户"},{id:"securities",label:"证券账户",description:"股票、基金等投资账户"},{id:"insurance",label:"保险理赔",description:"人寿保险、意外险等"},{id:"property",label:"房产信息",description:"不动产登记信息"},{id:"vehicle",label:"车辆信息",description:"机动车登记信息"},{id:"provident",label:"公积金",description:"住房公积金账户"}],P=(e,r)=>{k(a=>({...a,[e]:r}))},R=async()=>{try{let t="基础查询",l=w.queryTypes;l.length>3||l.includes("property")||l.includes("vehicle")?t="复杂查询":l.length>1&&(t="全面查询"),r({userId:(null==e?void 0:e.id)||"",serviceType:t,urgencyLevel:w.urgencyLevel,description:"查询".concat(w.targetName,"的").concat(l.join("、"),"信息"),queryDetails:w}),alert("查询申请已提交！请前往支付页面完成付款。"),a.push("/payment")}catch(e){alert("提交失败，请重试")}};return e?(0,t.FD)("div",{className:"min-h-screen",children:[(0,t.Y)(n.Navigation,{}),(0,t.Y)("main",{className:"py-12 bg-gray-50",children:(0,t.FD)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.Y)("div",{className:"mb-6",children:(0,t.FD)(D(),{href:"/dashboard",className:"flex items-center text-gray-600 hover:text-red-600 transition-colors",children:[(0,t.Y)(b.A,{className:"w-4 h-4 mr-2"}),"返回仪表板"]})}),(0,t.FD)("div",{className:"mb-8",children:[(0,t.Y)("div",{className:"flex items-center justify-between",children:C.map(e=>(0,t.FD)("div",{className:"flex items-center",children:[(0,t.Y)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-semibold ".concat(Y>=e.number?"chinese-gradient text-white":"bg-gray-200 text-gray-600"),children:e.number}),e.number<C.length&&(0,t.Y)("div",{className:"w-24 h-1 mx-2 ".concat(Y>e.number?"bg-red-500":"bg-gray-200")})]},e.number))}),(0,t.FD)("div",{className:"mt-4",children:[(0,t.Y)("h2",{className:"text-xl font-semibold text-gray-900",children:C[Y-1].title}),(0,t.Y)("p",{className:"text-gray-600",children:C[Y-1].description})]})]}),(0,t.Y)(m.Zp,{className:"mb-8",children:(0,t.Y)(m.Wu,{className:"p-8",children:(()=>{switch(Y){case 1:return(0,t.FD)("div",{className:"space-y-6",children:[(0,t.FD)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.FD)("div",{className:"space-y-2",children:[(0,t.FD)(h.J,{htmlFor:"targetName",className:"flex items-center",children:[(0,t.Y)(g.A,{className:"w-4 h-4 mr-2 text-red-600"}),"被查询人姓名 *"]}),(0,t.Y)(c.p,{id:"targetName",placeholder:"请输入被查询人的真实姓名",value:w.targetName,onChange:e=>P("targetName",e.target.value),required:!0})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"targetIdCard",children:"身份证号码 *"}),(0,t.Y)(c.p,{id:"targetIdCard",placeholder:"请输入18位身份证号码",value:w.targetIdCard,onChange:e=>P("targetIdCard",e.target.value),maxLength:18,required:!0})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.FD)(h.J,{htmlFor:"targetBirthDate",className:"flex items-center",children:[(0,t.Y)(v.A,{className:"w-4 h-4 mr-2 text-red-600"}),"出生日期"]}),(0,t.Y)(c.p,{id:"targetBirthDate",type:"date",value:w.targetBirthDate,onChange:e=>P("targetBirthDate",e.target.value)})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"targetDeathDate",children:"去世日期（如适用）"}),(0,t.Y)(c.p,{id:"targetDeathDate",type:"date",value:w.targetDeathDate,onChange:e=>P("targetDeathDate",e.target.value)})]})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.FD)(h.J,{htmlFor:"targetLastAddress",className:"flex items-center",children:[(0,t.Y)(y.A,{className:"w-4 h-4 mr-2 text-red-600"}),"最后居住地址"]}),(0,t.Y)(c.p,{id:"targetLastAddress",placeholder:"请输入被查询人最后居住的详细地址",value:w.targetLastAddress,onChange:e=>P("targetLastAddress",e.target.value)})]})]});case 2:return(0,t.FD)("div",{className:"space-y-6",children:[(0,t.FD)("div",{children:[(0,t.Y)("h3",{className:"text-lg font-semibold mb-4",children:"请选择要查询的财产类型："}),(0,t.Y)("div",{className:"grid md:grid-cols-2 gap-4",children:A.map(e=>(0,t.Y)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-red-300 transition-colors",children:(0,t.FD)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,t.Y)("input",{type:"checkbox",checked:w.queryTypes.includes(e.id),onChange:r=>{var a,t;return a=e.id,t=r.target.checked,void k(e=>({...e,queryTypes:t?[...e.queryTypes,a]:e.queryTypes.filter(e=>e!==a)}))},className:"mt-1"}),(0,t.FD)("div",{children:[(0,t.Y)("div",{className:"font-medium text-gray-900",children:e.label}),(0,t.Y)("div",{className:"text-sm text-gray-600",children:e.description})]})]})},e.id))})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"specificBanks",children:"指定银行（可选）"}),(0,t.Y)(c.p,{id:"specificBanks",placeholder:"如有特定银行需要查询，请填写，如：工商银行、建设银行",value:w.specificBanks,onChange:e=>P("specificBanks",e.target.value)})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"timeRange",children:"查询时间范围"}),(0,t.FD)("select",{id:"timeRange",className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md",value:w.timeRange,onChange:e=>P("timeRange",e.target.value),children:[(0,t.Y)("option",{value:"",children:"请选择查询时间范围"}),(0,t.Y)("option",{value:"recent1year",children:"近1年"}),(0,t.Y)("option",{value:"recent3years",children:"近3年"}),(0,t.Y)("option",{value:"recent5years",children:"近5年"}),(0,t.Y)("option",{value:"recent10years",children:"近10年"}),(0,t.Y)("option",{value:"all",children:"全部历史记录"})]})]})]});case 3:return(0,t.FD)("div",{className:"space-y-6",children:[(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"relationship",children:"与被查询人的关系 *"}),(0,t.FD)("select",{id:"relationship",className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md",value:w.relationship,onChange:e=>P("relationship",e.target.value),required:!0,children:[(0,t.Y)("option",{value:"",children:"请选择关系"}),(0,t.Y)("option",{value:"spouse",children:"配偶"}),(0,t.Y)("option",{value:"child",children:"子女"}),(0,t.Y)("option",{value:"parent",children:"父母"}),(0,t.Y)("option",{value:"sibling",children:"兄弟姐妹"}),(0,t.Y)("option",{value:"grandchild",children:"孙子女/外孙子女"}),(0,t.Y)("option",{value:"other",children:"其他法定继承人"})]})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"relationshipProof",children:"关系证明材料说明"}),(0,t.Y)(o.T,{id:"relationshipProof",placeholder:"请说明您拥有的关系证明材料，如：户口本、结婚证、出生证明等",value:w.relationshipProof,onChange:e=>P("relationshipProof",e.target.value),rows:4})]}),(0,t.FD)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.Y)("h4",{className:"font-semibold text-amber-800 mb-2",children:"所需证明材料："}),(0,t.FD)("ul",{className:"text-sm text-amber-700 space-y-1",children:[(0,t.Y)("li",{children:"• 申请人身份证明"}),(0,t.Y)("li",{children:"• 被查询人死亡证明（如适用）"}),(0,t.Y)("li",{children:"• 亲属关系证明（户口本、结婚证等）"}),(0,t.Y)("li",{children:"• 委托书及公证书"}),(0,t.Y)("li",{children:"• 其他相关法律文件"})]})]})]});case 4:return(0,t.FD)("div",{className:"space-y-6",children:[(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{htmlFor:"additionalInfo",children:"补充说明"}),(0,t.Y)(o.T,{id:"additionalInfo",placeholder:"请提供任何有助于查询的额外信息，如：已知的银行信息、特殊情况说明等",value:w.additionalInfo,onChange:e=>P("additionalInfo",e.target.value),rows:5})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.Y)(h.J,{children:"紧急程度"}),(0,t.Y)("div",{className:"flex space-x-4",children:["普通","加急","特急"].map(e=>(0,t.FD)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,t.Y)("input",{type:"radio",name:"urgencyLevel",value:e,checked:w.urgencyLevel===e,onChange:e=>P("urgencyLevel",e.target.value)}),(0,t.Y)("span",{className:"特急"===e?"text-red-600 font-medium":"",children:e})]},e))})]}),(0,t.FD)("div",{className:"space-y-2",children:[(0,t.FD)(h.J,{className:"flex items-center",children:[(0,t.Y)(f,{className:"w-4 h-4 mr-2 text-red-600"}),"文件上传"]}),(0,t.FD)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,t.Y)(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.Y)("p",{className:"text-gray-600 mb-2",children:"点击上传或拖拽文件到此处"}),(0,t.Y)("p",{className:"text-sm text-gray-500",children:"支持PDF、JPG、PNG格式，单个文件不超过10MB"}),(0,t.Y)(s.$,{variant:"outline",className:"mt-4",children:"选择文件"})]})]}),(0,t.FD)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.Y)("h4",{className:"font-semibold text-blue-800 mb-2",children:"费用说明："}),(0,t.FD)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,t.Y)("p",{children:"• 基础查询：5,000元（单一银行账户）"}),(0,t.Y)("p",{children:"• 全面查询：12,000元（多银行 + 保险 + 证券）"}),(0,t.Y)("p",{children:"• 加急服务：在基础费用上增加30%"}),(0,t.Y)("p",{children:"• 特急服务：在基础费用上增加50%"})]})]})]});case 5:return(0,t.FD)("div",{className:"space-y-6",children:[(0,t.FD)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,t.Y)("h3",{className:"text-lg font-semibold mb-4",children:"查询申请确认"}),(0,t.FD)("div",{className:"space-y-4",children:[(0,t.FD)("div",{children:[(0,t.Y)("strong",{children:"被查询人："}),w.targetName," (",w.targetIdCard,")"]}),(0,t.FD)("div",{children:[(0,t.Y)("strong",{children:"查询类型："}),w.queryTypes.map(e=>{var r;return null==(r=A.find(r=>r.id===e))?void 0:r.label}).join("、")]}),(0,t.FD)("div",{children:[(0,t.Y)("strong",{children:"申请人关系："}),w.relationship]}),(0,t.FD)("div",{children:[(0,t.Y)("strong",{children:"紧急程度："}),w.urgencyLevel]}),w.additionalInfo&&(0,t.FD)("div",{children:[(0,t.Y)("strong",{children:"补充说明："}),w.additionalInfo]})]})]}),(0,t.FD)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.Y)("h4",{className:"font-semibold text-green-800 mb-2",children:"下一步流程："}),(0,t.FD)("ul",{className:"text-sm text-green-700 space-y-1",children:[(0,t.Y)("li",{children:"1. 提交申请后，我们将在1-3个工作日内联系您"}),(0,t.Y)("li",{children:"2. 专业律师将与您确认详细信息和所需材料"}),(0,t.Y)("li",{children:"3. 签订正式委托协议并进行公证"}),(0,t.Y)("li",{children:"4. 开始查询流程，预计7-15个工作日完成"}),(0,t.Y)("li",{children:"5. 提供详细的查询结果报告"})]})]})]});default:return null}})()})}),(0,t.FD)("div",{className:"flex justify-between",children:[(0,t.FD)(s.$,{variant:"outline",onClick:()=>{Y>1&&F(Y-1)},disabled:1===Y,className:"flex items-center",children:[(0,t.Y)(b.A,{className:"w-4 h-4 mr-2"}),"上一步"]}),Y<5?(0,t.FD)(s.$,{variant:"chinese",onClick:()=>{Y<5&&F(Y+1)},className:"flex items-center",children:["下一步",(0,t.Y)(N.A,{className:"w-4 h-4 ml-2"})]}):(0,t.FD)(s.$,{variant:"chinese",onClick:R,className:"flex items-center",children:[(0,t.Y)(x.A,{className:"w-4 h-4 mr-2"}),"提交申请"]})]})]})}),(0,t.Y)(d.Footer,{})]}):(a.push("/auth"),null)}},6112:(e,r,a)=>{"use strict";a.d(r,{p:()=>l});var t=a(2372);let l=a(8978).forwardRef((e,r)=>{let{className:a,type:l,...i}=e;return(0,t.Y)("input",{type:l,className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a||""),ref:r,...i})});l.displayName="Input"},8644:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(5).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9287:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(5).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},e=>{e.O(0,[372,255,322,359,876,358],()=>e(e.s=795)),_N_E=e.O()}]);